# pylint: disable=line-too-long,useless-suppression
# coding=utf-8
# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
# Code generated by Microsoft (R) Python Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is regenerated.
# --------------------------------------------------------------------------

from azure.identity import DefaultAzureCredential

from azure.analytics.onlineexperimentation import OnlineExperimentationClient

"""
# PREREQUISITES
    pip install azure-identity
    pip install azure-analytics-onlineexperimentation
# USAGE
    python validate_metric.py

    Before run the sample, please set the values of the client ID, tenant ID and client secret
    of the AAD application as environment variables: AZURE_CLIENT_ID, AZURE_TENANT_ID,
    AZURE_CLIENT_SECRET. For more info about how to get the value, please see:
    https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal
"""


def main():
    client = OnlineExperimentationClient(
        endpoint="ENDPOINT",
        credential=DefaultAzureCredential(),
    )

    response = client.validate_metric(
        experiment_metric_id="events_purchase_creditcard",
        body={
            "categories": ["Monetization"],
            "definition": {
                "type": "Average",
                "value": {"eventName": "Transaction", "eventProperty": "Revenue", "filter": "Revenue >"},
            },
            "description": "The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
            "desiredDirection": "Increase",
            "displayName": "Average revenue per purchase [USD]",
            "lifecycle": "Active",
        },
    )
    print(response)


# x-ms-original-file: 2025-05-31-preview/ValidateMetric.json
if __name__ == "__main__":
    main()
