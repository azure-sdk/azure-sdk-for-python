# coding=utf-8
# --------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is regenerated.
# --------------------------------------------------------------------------

from copy import deepcopy
from typing import Any, Awaitable, TYPE_CHECKING

from msrest import Deserializer, Serializer

from azure.core.rest import AsyncHttpResponse, HttpRequest
from azure.mgmt.core import AsyncARMPipelineClient

from .. import models
from ._configuration import ApiManagementClientConfiguration
from .operations import ApiDiagnosticLoggerOperations, ApiDiagnosticOperations, ApiExportOperations, ApiIssuAttachmentOperations, ApiIssuCommentOperations, ApiIssueAttachmentOperations, ApiIssueAttachmentsOperations, ApiIssueCommentOperations, ApiIssueCommentsOperations, ApiIssueOperations, ApiIssuesOperations, ApiManagementOperationsOperations, ApiManagementServiceOperations, ApiOperationOperations, ApiOperationPolicyOperations, ApiOperations, ApiPolicyOperations, ApiProductOperations, ApiReleaseOperations, ApiRevisionsOperations, ApiSchemaOperations, ApiVersionSetOperations, AuthorizationServerOperations, BackendOperations, CertificateOperations, DelegationSettingsOperations, DiagnosticLoggerOperations, DiagnosticOperations, EmailTemplateOperations, GroupOperations, GroupUserOperations, IdentityProviderOperations, LoggerOperations, NetworkStatusOperations, NotificationOperations, NotificationRecipientEmailOperations, NotificationRecipientUserOperations, OpenIdConnectProviderOperations, OperationOperations, PolicyOperations, PolicySnippetsOperations, ProductApiOperations, ProductGroupOperations, ProductOperations, ProductPolicyOperations, ProductSubscriptionsOperations, PropertyOperations, QuotaByCounterKeysOperations, QuotaByPeriodKeysOperations, RegionsOperations, ReportsOperations, SignInSettingsOperations, SignUpSettingsOperations, SubscriptionOperations, TagDescriptionOperations, TagOperations, TagResourceOperations, TenantAccessGitOperations, TenantAccessOperations, TenantConfigurationOperations, UserGroupOperations, UserIdentitiesOperations, UserOperations, UserSubscriptionOperations

if TYPE_CHECKING:
    # pylint: disable=unused-import,ungrouped-imports
    from azure.core.credentials_async import AsyncTokenCredential

class ApiManagementClient:    # pylint: disable=too-many-instance-attributes
    """ApiManagement Client.

    :ivar policy: PolicyOperations operations
    :vartype policy: azure.mgmt.apimanagement.aio.operations.PolicyOperations
    :ivar policy_snippets: PolicySnippetsOperations operations
    :vartype policy_snippets: azure.mgmt.apimanagement.aio.operations.PolicySnippetsOperations
    :ivar regions: RegionsOperations operations
    :vartype regions: azure.mgmt.apimanagement.aio.operations.RegionsOperations
    :ivar api: ApiOperations operations
    :vartype api: azure.mgmt.apimanagement.aio.operations.ApiOperations
    :ivar api_revisions: ApiRevisionsOperations operations
    :vartype api_revisions: azure.mgmt.apimanagement.aio.operations.ApiRevisionsOperations
    :ivar api_release: ApiReleaseOperations operations
    :vartype api_release: azure.mgmt.apimanagement.aio.operations.ApiReleaseOperations
    :ivar api_operation: ApiOperationOperations operations
    :vartype api_operation: azure.mgmt.apimanagement.aio.operations.ApiOperationOperations
    :ivar api_operation_policy: ApiOperationPolicyOperations operations
    :vartype api_operation_policy:
     azure.mgmt.apimanagement.aio.operations.ApiOperationPolicyOperations
    :ivar api_product: ApiProductOperations operations
    :vartype api_product: azure.mgmt.apimanagement.aio.operations.ApiProductOperations
    :ivar api_policy: ApiPolicyOperations operations
    :vartype api_policy: azure.mgmt.apimanagement.aio.operations.ApiPolicyOperations
    :ivar api_schema: ApiSchemaOperations operations
    :vartype api_schema: azure.mgmt.apimanagement.aio.operations.ApiSchemaOperations
    :ivar api_diagnostic: ApiDiagnosticOperations operations
    :vartype api_diagnostic: azure.mgmt.apimanagement.aio.operations.ApiDiagnosticOperations
    :ivar api_diagnostic_logger: ApiDiagnosticLoggerOperations operations
    :vartype api_diagnostic_logger:
     azure.mgmt.apimanagement.aio.operations.ApiDiagnosticLoggerOperations
    :ivar api_issues: ApiIssuesOperations operations
    :vartype api_issues: azure.mgmt.apimanagement.aio.operations.ApiIssuesOperations
    :ivar api_issue: ApiIssueOperations operations
    :vartype api_issue: azure.mgmt.apimanagement.aio.operations.ApiIssueOperations
    :ivar api_issue_comments: ApiIssueCommentsOperations operations
    :vartype api_issue_comments: azure.mgmt.apimanagement.aio.operations.ApiIssueCommentsOperations
    :ivar api_issu_comment: ApiIssuCommentOperations operations
    :vartype api_issu_comment: azure.mgmt.apimanagement.aio.operations.ApiIssuCommentOperations
    :ivar api_issue_comment: ApiIssueCommentOperations operations
    :vartype api_issue_comment: azure.mgmt.apimanagement.aio.operations.ApiIssueCommentOperations
    :ivar api_issue_attachments: ApiIssueAttachmentsOperations operations
    :vartype api_issue_attachments:
     azure.mgmt.apimanagement.aio.operations.ApiIssueAttachmentsOperations
    :ivar api_issu_attachment: ApiIssuAttachmentOperations operations
    :vartype api_issu_attachment:
     azure.mgmt.apimanagement.aio.operations.ApiIssuAttachmentOperations
    :ivar api_issue_attachment: ApiIssueAttachmentOperations operations
    :vartype api_issue_attachment:
     azure.mgmt.apimanagement.aio.operations.ApiIssueAttachmentOperations
    :ivar api_export: ApiExportOperations operations
    :vartype api_export: azure.mgmt.apimanagement.aio.operations.ApiExportOperations
    :ivar authorization_server: AuthorizationServerOperations operations
    :vartype authorization_server:
     azure.mgmt.apimanagement.aio.operations.AuthorizationServerOperations
    :ivar backend: BackendOperations operations
    :vartype backend: azure.mgmt.apimanagement.aio.operations.BackendOperations
    :ivar certificate: CertificateOperations operations
    :vartype certificate: azure.mgmt.apimanagement.aio.operations.CertificateOperations
    :ivar api_management_operations: ApiManagementOperationsOperations operations
    :vartype api_management_operations:
     azure.mgmt.apimanagement.aio.operations.ApiManagementOperationsOperations
    :ivar api_management_service: ApiManagementServiceOperations operations
    :vartype api_management_service:
     azure.mgmt.apimanagement.aio.operations.ApiManagementServiceOperations
    :ivar diagnostic: DiagnosticOperations operations
    :vartype diagnostic: azure.mgmt.apimanagement.aio.operations.DiagnosticOperations
    :ivar diagnostic_logger: DiagnosticLoggerOperations operations
    :vartype diagnostic_logger: azure.mgmt.apimanagement.aio.operations.DiagnosticLoggerOperations
    :ivar email_template: EmailTemplateOperations operations
    :vartype email_template: azure.mgmt.apimanagement.aio.operations.EmailTemplateOperations
    :ivar group: GroupOperations operations
    :vartype group: azure.mgmt.apimanagement.aio.operations.GroupOperations
    :ivar group_user: GroupUserOperations operations
    :vartype group_user: azure.mgmt.apimanagement.aio.operations.GroupUserOperations
    :ivar identity_provider: IdentityProviderOperations operations
    :vartype identity_provider: azure.mgmt.apimanagement.aio.operations.IdentityProviderOperations
    :ivar logger: LoggerOperations operations
    :vartype logger: azure.mgmt.apimanagement.aio.operations.LoggerOperations
    :ivar network_status: NetworkStatusOperations operations
    :vartype network_status: azure.mgmt.apimanagement.aio.operations.NetworkStatusOperations
    :ivar notification: NotificationOperations operations
    :vartype notification: azure.mgmt.apimanagement.aio.operations.NotificationOperations
    :ivar notification_recipient_user: NotificationRecipientUserOperations operations
    :vartype notification_recipient_user:
     azure.mgmt.apimanagement.aio.operations.NotificationRecipientUserOperations
    :ivar notification_recipient_email: NotificationRecipientEmailOperations operations
    :vartype notification_recipient_email:
     azure.mgmt.apimanagement.aio.operations.NotificationRecipientEmailOperations
    :ivar open_id_connect_provider: OpenIdConnectProviderOperations operations
    :vartype open_id_connect_provider:
     azure.mgmt.apimanagement.aio.operations.OpenIdConnectProviderOperations
    :ivar sign_in_settings: SignInSettingsOperations operations
    :vartype sign_in_settings: azure.mgmt.apimanagement.aio.operations.SignInSettingsOperations
    :ivar sign_up_settings: SignUpSettingsOperations operations
    :vartype sign_up_settings: azure.mgmt.apimanagement.aio.operations.SignUpSettingsOperations
    :ivar delegation_settings: DelegationSettingsOperations operations
    :vartype delegation_settings:
     azure.mgmt.apimanagement.aio.operations.DelegationSettingsOperations
    :ivar product: ProductOperations operations
    :vartype product: azure.mgmt.apimanagement.aio.operations.ProductOperations
    :ivar product_api: ProductApiOperations operations
    :vartype product_api: azure.mgmt.apimanagement.aio.operations.ProductApiOperations
    :ivar product_group: ProductGroupOperations operations
    :vartype product_group: azure.mgmt.apimanagement.aio.operations.ProductGroupOperations
    :ivar product_subscriptions: ProductSubscriptionsOperations operations
    :vartype product_subscriptions:
     azure.mgmt.apimanagement.aio.operations.ProductSubscriptionsOperations
    :ivar product_policy: ProductPolicyOperations operations
    :vartype product_policy: azure.mgmt.apimanagement.aio.operations.ProductPolicyOperations
    :ivar property: PropertyOperations operations
    :vartype property: azure.mgmt.apimanagement.aio.operations.PropertyOperations
    :ivar quota_by_counter_keys: QuotaByCounterKeysOperations operations
    :vartype quota_by_counter_keys:
     azure.mgmt.apimanagement.aio.operations.QuotaByCounterKeysOperations
    :ivar quota_by_period_keys: QuotaByPeriodKeysOperations operations
    :vartype quota_by_period_keys:
     azure.mgmt.apimanagement.aio.operations.QuotaByPeriodKeysOperations
    :ivar reports: ReportsOperations operations
    :vartype reports: azure.mgmt.apimanagement.aio.operations.ReportsOperations
    :ivar subscription: SubscriptionOperations operations
    :vartype subscription: azure.mgmt.apimanagement.aio.operations.SubscriptionOperations
    :ivar tag_resource: TagResourceOperations operations
    :vartype tag_resource: azure.mgmt.apimanagement.aio.operations.TagResourceOperations
    :ivar tag: TagOperations operations
    :vartype tag: azure.mgmt.apimanagement.aio.operations.TagOperations
    :ivar tag_description: TagDescriptionOperations operations
    :vartype tag_description: azure.mgmt.apimanagement.aio.operations.TagDescriptionOperations
    :ivar operation: OperationOperations operations
    :vartype operation: azure.mgmt.apimanagement.aio.operations.OperationOperations
    :ivar tenant_access: TenantAccessOperations operations
    :vartype tenant_access: azure.mgmt.apimanagement.aio.operations.TenantAccessOperations
    :ivar tenant_access_git: TenantAccessGitOperations operations
    :vartype tenant_access_git: azure.mgmt.apimanagement.aio.operations.TenantAccessGitOperations
    :ivar tenant_configuration: TenantConfigurationOperations operations
    :vartype tenant_configuration:
     azure.mgmt.apimanagement.aio.operations.TenantConfigurationOperations
    :ivar user: UserOperations operations
    :vartype user: azure.mgmt.apimanagement.aio.operations.UserOperations
    :ivar user_group: UserGroupOperations operations
    :vartype user_group: azure.mgmt.apimanagement.aio.operations.UserGroupOperations
    :ivar user_subscription: UserSubscriptionOperations operations
    :vartype user_subscription: azure.mgmt.apimanagement.aio.operations.UserSubscriptionOperations
    :ivar user_identities: UserIdentitiesOperations operations
    :vartype user_identities: azure.mgmt.apimanagement.aio.operations.UserIdentitiesOperations
    :ivar api_version_set: ApiVersionSetOperations operations
    :vartype api_version_set: azure.mgmt.apimanagement.aio.operations.ApiVersionSetOperations
    :param credential: Credential needed for the client to connect to Azure.
    :type credential: ~azure.core.credentials_async.AsyncTokenCredential
    :param subscription_id: Subscription credentials which uniquely identify Microsoft Azure
     subscription. The subscription ID forms part of the URI for every service call.
    :type subscription_id: str
    :param base_url: Service URL. Default value is "https://management.azure.com".
    :type base_url: str
    :keyword api_version: Api Version. Default value is "2022-01-09". Note that overriding this
     default value may result in unsupported behavior.
    :paramtype api_version: str
    :keyword int polling_interval: Default waiting time between two polls for LRO operations if no
     Retry-After header is present.
    """

    def __init__(
        self,
        credential: "AsyncTokenCredential",
        subscription_id: str,
        base_url: str = "https://management.azure.com",
        **kwargs: Any
    ) -> None:
        self._config = ApiManagementClientConfiguration(credential=credential, subscription_id=subscription_id, **kwargs)
        self._client = AsyncARMPipelineClient(base_url=base_url, config=self._config, **kwargs)

        client_models = {k: v for k, v in models.__dict__.items() if isinstance(v, type)}
        self._serialize = Serializer(client_models)
        self._deserialize = Deserializer(client_models)
        self._serialize.client_side_validation = False
        self.policy = PolicyOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.policy_snippets = PolicySnippetsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.regions = RegionsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api = ApiOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_revisions = ApiRevisionsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_release = ApiReleaseOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_operation = ApiOperationOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_operation_policy = ApiOperationPolicyOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_product = ApiProductOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_policy = ApiPolicyOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_schema = ApiSchemaOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_diagnostic = ApiDiagnosticOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_diagnostic_logger = ApiDiagnosticLoggerOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issues = ApiIssuesOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issue = ApiIssueOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issue_comments = ApiIssueCommentsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issu_comment = ApiIssuCommentOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issue_comment = ApiIssueCommentOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issue_attachments = ApiIssueAttachmentsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issu_attachment = ApiIssuAttachmentOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_issue_attachment = ApiIssueAttachmentOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_export = ApiExportOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.authorization_server = AuthorizationServerOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.backend = BackendOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.certificate = CertificateOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_management_operations = ApiManagementOperationsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_management_service = ApiManagementServiceOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.diagnostic = DiagnosticOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.diagnostic_logger = DiagnosticLoggerOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.email_template = EmailTemplateOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.group = GroupOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.group_user = GroupUserOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.identity_provider = IdentityProviderOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.logger = LoggerOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.network_status = NetworkStatusOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.notification = NotificationOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.notification_recipient_user = NotificationRecipientUserOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.notification_recipient_email = NotificationRecipientEmailOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.open_id_connect_provider = OpenIdConnectProviderOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.sign_in_settings = SignInSettingsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.sign_up_settings = SignUpSettingsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.delegation_settings = DelegationSettingsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.product = ProductOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.product_api = ProductApiOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.product_group = ProductGroupOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.product_subscriptions = ProductSubscriptionsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.product_policy = ProductPolicyOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.property = PropertyOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.quota_by_counter_keys = QuotaByCounterKeysOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.quota_by_period_keys = QuotaByPeriodKeysOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.reports = ReportsOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.subscription = SubscriptionOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tag_resource = TagResourceOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tag = TagOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tag_description = TagDescriptionOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.operation = OperationOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tenant_access = TenantAccessOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tenant_access_git = TenantAccessGitOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.tenant_configuration = TenantConfigurationOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.user = UserOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.user_group = UserGroupOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.user_subscription = UserSubscriptionOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.user_identities = UserIdentitiesOperations(
            self._client, self._config, self._serialize, self._deserialize
        )
        self.api_version_set = ApiVersionSetOperations(
            self._client, self._config, self._serialize, self._deserialize
        )


    def _send_request(
        self,
        request: HttpRequest,
        **kwargs: Any
    ) -> Awaitable[AsyncHttpResponse]:
        """Runs the network request through the client's chained policies.

        >>> from azure.core.rest import HttpRequest
        >>> request = HttpRequest("GET", "https://www.example.org/")
        <HttpRequest [GET], url: 'https://www.example.org/'>
        >>> response = await client._send_request(request)
        <AsyncHttpResponse: 200 OK>

        For more information on this code flow, see https://aka.ms/azsdk/python/protocol/quickstart

        :param request: The network request you want to make. Required.
        :type request: ~azure.core.rest.HttpRequest
        :keyword bool stream: Whether the response payload will be streamed. Defaults to False.
        :return: The response of your network call. Does not do error handling on your response.
        :rtype: ~azure.core.rest.AsyncHttpResponse
        """

        request_copy = deepcopy(request)
        request_copy.url = self._client.format_url(request_copy.url)
        return self._client.send_request(request_copy, **kwargs)

    async def close(self) -> None:
        await self._client.close()

    async def __aenter__(self) -> "ApiManagementClient":
        await self._client.__aenter__()
        return self

    async def __aexit__(self, *exc_details) -> None:
        await self._client.__aexit__(*exc_details)
